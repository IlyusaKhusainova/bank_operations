# bank_operations

## Описание 
     Это проект для обработки банковских операций, включая функции фильтрации и сортировки транзакций.

## Установка
     Для работы с проектом вам нужно:
     1. Клонировать репозиторий:
bash
        git clone https://github.com/username/bank_operations.git

    2. Установить зависимости (если используются):
bash
        pip install -r requirements.txt
## Использование

### Функция filter_by_state

python
     from src.processing import filter_by_state
     transactions = [
         {'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
         {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}
     ]
     executed_transactions = filter_by_state(transactions)

### Функция sort_by_date

python
     from src.processing import sort_by_date
     sorted_transactions = sort_by_date(transactions)

## Примеры
     - Выход функции filter_by_state() со статусом по умолчанию 'EXECUTED':
python
     [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}]

    - Выход функции 
sort_by_date()
 (по убыванию):
python
     [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, ...]


# Тестирование
В проекте реализованы тесты для всех функций. Тесты проверяют:

    -Корректность работы функций с различными входными данными.
    -Обработку некорректных входных данных.
    -Параметризацию тестов для проверки различных кейсов.

### Используемые библиотеки
    -pytest - для написания и запуска тестов.
    -pytest-cov - для измерения покрытия тестами.
Покрытие тестами составляет 97%.
Количество проводимых тестов - 30.

### Линтеры и форматирование
Для обеспечения качества кода используются линтеры и форматтеры:

    -flake8 - для проверки стиля кода.
    -mypy - для статической типизации.
    -isort - для сортировки импортов.

# Какие тесты проводились:
    
## Модуль masks
    -Функция get_mask_card_number:
Тестирование правильности маскирования номера карты.
Проверка работы функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины номеров.
Проверка, что функция корректно обрабатывает входные строки, где отсутствует номер карты.
    
    -Функция get_mask_account:
Тестирование правильности маскирования номера счета.
Проверка работы функции с различными форматами и длинами номеров счетов.
Проверка, что функция корректно обрабатывает входные данные, где номер счета меньше ожидаемой длины.
## Модуль widget
    -Функция mask_account_card:
Тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных данных (карта или счет).
Параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
Тестирование функции на обработку некорректных входных данных и проверка ее устойчивости к ошибкам.

    -Функция get_date:
Тестирование правильности преобразования даты.
Проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
Проверка, что функция корректно обрабатывает входные строки, где отсутствует дата.
## Модуль processing
    -Функция filter_by_state:
Тестирование фильтрации списка словарей по заданному статусу 
state. Проверка работы функции при отсутствии словарей с указанным статусом 
state в списке. Параметризация тестов для различных возможных значений статуса
state.

    -Функция sort_by_date:
Тестирование сортировки списка словарей по датам в порядке убывания и возрастания.
Проверка корректности сортировки при одинаковых датах.
Тесты на работу функции с некорректными или нестандартными форматами дат.


# Модуль generators

В проекте также реализован модуль generators, который включает следующие функции:

## Функция filter_by_currency

Функция filter_by_currency принимает список словарей на вход и возвращает итератор, фильтруя транзакции по заданной валюте.

Пример использования:

    from src.generators import filter_by_currency

    transactions = [
    {'id': 1, 'amount': 100, 'currency': 'USD'},
    {'id': 2, 'amount': 200, 'currency': 'EUR'},
    ]
    usd_transactions = list(filter_by_currency(transactions, 'USD'))
    print(usd_transactions)  # [{'id': 1, 'amount': 100, 'currency': 'USD'}]

## Функция-генератор transaction_descriptions

Функция-генератор transaction_descriptions принимает на вход список словарей и использует yield для генерации значений по запросу.

Пример использования:

    from src.generators import transaction_descriptions

    transactions = [
    {'id': 1, 'description': 'Перевод'},
    {'id': 2, 'description': None},
    ]
    descriptions = list(transaction_descriptions(transactions))
    print(descriptions)  # ['Перевод', 'Описание отсутствует']

## Генератор card_number_generator

Генератор card_number_generator принимает значения start и stop в качестве аргумента и генерирует номера карт.

Пример использования:

    from src.generators import card_number_generator

    for card_number in card_number_generator(1000, 1005):
    print(card_number)  # Генерирует номера карт от 1000 до 1005